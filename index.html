<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Texas Rugby Referees</title>
  <link rel="stylesheet" href="style.css?v=include-footer1" />
</head>
<body>

  <!-- ===== NAV INCLUDE ===== -->
  <div id="nav-placeholder"></div>
  <script>
    (function () {
      const parts = window.location.pathname.split('/').filter(Boolean);
      const repo  = parts[0] || '';            // e.g. "TexasRugbyReferees"
      const base  = repo ? '/' + repo + '/' : '/';

      fetch(base + 'nav.html')
        .then(res => res.text())
        .then(html => {
          const holder = document.getElementById('nav-placeholder');
          holder.innerHTML = html;

          // Rewrite any absolute links (/about/...) to include /<repo>/...
          holder.querySelectorAll('a[href^="/"]').forEach(a => {
            a.setAttribute('href', base + a.getAttribute('href').replace(/^\//, ''));
          });

          // Close drawer on link or overlay click
          const navToggle = document.getElementById('nav-toggle');
          holder.querySelectorAll('.drawer a').forEach(a => {
            a.addEventListener('click', () => { navToggle.checked = false; });
          });
          holder.querySelector('.overlay').addEventListener('click', () => {
            navToggle.checked = false;
          });
        })
        .catch(err => console.error('Failed to load nav:', err));
    })();
  </script>

  <!-- ===== PAGE HEADER ===== -->
  <header class="site-header">
    <h1 class="site-title">Texas Rugby Referees</h1>
    <p class="site-subtitle">Assigning • Development • Community</p>
  </header>

  <!-- ===== MAIN CONTENT ===== -->
  <main>
    <div class="card">
      <h2>Welcome</h2>
      <p>This is a placeholder home section. Replace with announcements or a big call-to-action.</p>
      <p><a href="matches/schedule.html">→ View Match Schedule</a></p>
    </div>

    <div class="card">
      <h3>Quick Links</h3>
      <ul>
        <li><a href="matches/schedule.html">Matches</a></li>
        <li><a href="about/contact.html">Contact</a></li>
      </ul>
    </div>
  </main>

  <!-- ===== FOOTER INCLUDE ===== -->
  <div id="footer-placeholder"></div>
  <script>
    (function () {
      const parts = window.location.pathname.split('/').filter(Boolean);
      const repo  = parts[0] || '';
      const base  = repo ? '/' + repo + '/' : '/';

      fetch(base + 'footer.html')
        .then(res => res.text())
        .then(html => {
          const fp = document.getElementById('footer-placeholder');
          fp.innerHTML = html;

          // Rewrite absolute links in footer as well
          fp.querySelectorAll('a[href^="/"]').forEach(a => {
            a.setAttribute('href', base + a.getAttribute('href').replace(/^\//, ''));
          });

          // Set the year
          const y = fp.querySelector('#y');
          if (y) y.textContent = new Date().getFullYear();
        })
        .catch(err => console.error('Failed to load footer:', err));
    })();
  </script>
</body>
</html>
